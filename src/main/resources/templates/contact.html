<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{page.contact.title}">Contacto - Salud con Amor</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}">
    <link rel="stylesheet" th:href="@{/css/contact.css}">
</head>
<body>
    <!-- Header -->
        <!-- HEADER -->
    <div th:replace="~{fragments/_header :: header}"></div>

    <main class="contact-container">
        <div class="contact-header">
            <h1 th:text="#{contact.header.title}">¬øNecesitas Ayuda?</h1>
            <p th:text="#{contact.header.subtitle}">Estamos aqu√≠ para resolver tus dudas y problemas con tus pedidos</p>
        </div>

        <div th:if="${success}" class="alert alert-success">
            <span th:text="${message}"></span>
        </div>

        <div class="contact-grid">
            <div class="contact-info">
                <h2 th:text="#{contact.info.title}">Informaci√≥n de Contacto</h2>
                <div class="contact-methods">
                    <div class="contact-method">
                        <div class="method-icon">üìû</div>
                        <div class="method-info">
                            <h3 th:text="#{contact.phone}">Tel√©fono</h3>
                            <p>+506 4000-1234</p>
                            <p th:text="#{contact.phone.schedule}">Lunes a Viernes: 8:00 AM - 6:00 PM</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="method-icon">‚úâÔ∏è</div>
                        <div class="method-info">
                            <h3 th:text="#{contact.email}">Email</h3>
                            <p>soporte@saludconamor.cr</p>
                            <p th:text="#{contact.email.response}">Respuesta en 24 horas</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="method-icon">üí¨</div>
                        <div class="method-info">
                            <h3 th:text="#{contact.whatsapp}">WhatsApp</h3>
                            <p>+506 8888-8888</p>
                            <p th:text="#{contact.whatsapp.immediate}">Atenci√≥n inmediata</p>
                        </div>
                    </div>
                    <div class="contact-method">
                        <div class="method-icon">üè™</div>
                        <div class="method-info">
                            <h3 th:text="#{contact.stores}">Tiendas F√≠sicas</h3>
                            <p th:text="#{contact.stores.sanjose}">San Jos√© Centro</p>
                            <p th:text="#{contact.stores.escazu}">Escaz√∫, Multiplaza</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contact-form">
                <h2 th:text="#{contact.form.title}">Env√≠anos un Mensaje</h2>
                <form th:action="@{/contact}" method="post">
                    <div class="form-group">
                        <label for="name" th:text="#{contact.form.name}">Nombre completo *</label>
                        <input type="text" id="name" name="name" class="form-control" required 
                               th:value="${#authentication.principal.username}">
                    </div>
                    <div class="form-group">
                        <label for="email" th:text="#{contact.form.email}">Correo electr√≥nico *</label>
                        <input type="email" id="email" name="email" class="form-control" required>
                    </div>
                    <div class="form-group">
                        <label for="orderId" th:text="#{contact.form.orderid}">N√∫mero de pedido (opcional)</label>
                        <input type="text" id="orderId" name="orderId" class="form-control" 
                               th:value="${param.orderId}">
                    </div>
                    <div class="form-group">
                        <label for="subject" th:text="#{contact.form.subject}">Asunto *</label>
                        <select id="subject" name="subject" class="form-control" required>
                            <option value="" th:text="#{contact.form.subject.select}">Selecciona un asunto</option>
                            <option value="problema-pedido" th:text="#{contact.form.subject.problem}">Problema con mi pedido</option>
                            <option value="seguimiento-pedido" th:text="#{contact.form.subject.tracking}">Seguimiento de pedido</option>
                            <option value="devolucion" th:text="#{contact.form.subject.return}">Devoluci√≥n o cambio</option>
                            <option value="facturacion" th:text="#{contact.form.subject.billing}">Problema con facturaci√≥n</option>
                            <option value="producto" th:text="#{contact.form.subject.product}">Consulta sobre producto</option>
                            <option value="general" th:text="#{contact.form.subject.general}">Consulta general</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="message" th:text="#{contact.form.message}">Mensaje *</label>
                        <textarea id="message" name="message" class="form-control" 
                                  th:placeholder="#{contact.form.message.placeholder}" required></textarea>
                    </div>
                    <button type="submit" class="btn-submit" th:text="#{contact.form.submit}">Enviar Mensaje</button>
                </form>
            </div>
        </div>

        <div class="faq-section">
            <h2 th:text="#{contact.faq.title}">Preguntas Frecuentes</h2>
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span th:text="#{contact.faq.tracking.question}">¬øC√≥mo puedo hacer seguimiento a mi pedido?</span>
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    <span th:text="#{contact.faq.tracking.answer}">Puedes revisar el estado de tu pedido en la secci√≥n "Mis Pedidos" en tu cuenta. All√≠ encontrar√°s informaci√≥n actualizada sobre el proceso de env√≠o.</span>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span th:text="#{contact.faq.delivery.question}">¬øCu√°nto tiempo tarda la entrega?</span>
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    <span th:text="#{contact.faq.delivery.answer}">El tiempo de entrega var√≠a seg√∫n tu ubicaci√≥n: ‚Ä¢ √Årea Metropolitana: 1-2 d√≠as h√°biles ‚Ä¢ Otras provincias: 3-5 d√≠as h√°biles ‚Ä¢ Zonas rurales: 5-7 d√≠as h√°biles</span>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span th:text="#{contact.faq.modify.question}">¬øPuedo modificar o cancelar mi pedido?</span>
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    <span th:text="#{contact.faq.modify.answer}">Los pedidos pueden ser modificados o cancelados dentro de las primeras 2 horas despu√©s de realizado el pedido. Despu√©s de ese tiempo, contacta con soporte para ver las opciones disponibles.</span>
                </div>
            </div>
            <div class="faq-item">
                <div class="faq-question" onclick="toggleFAQ(this)">
                    <span th:text="#{contact.faq.payment.question}">¬øQu√© m√©todos de pago aceptan?</span>
                    <span>+</span>
                </div>
                <div class="faq-answer">
                    <span th:text="#{contact.faq.payment.answer}">Aceptamos: Tarjetas de cr√©dito/d√©bito (Visa, MasterCard), Sinpe M√≥vil, transferencias bancarias y efectivo en tiendas f√≠sicas.</span>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <div th:replace="~{fragments/_footer :: footer}"></div>

    <script>
        function toggleFAQ(element) {
            const answer = element.nextElementSibling;
            const isOpen = answer.style.display === 'block';
            
            // Cerrar todas las FAQs
            document.querySelectorAll('.faq-answer').forEach(el => {
                el.style.display = 'none';
            });
            document.querySelectorAll('.faq-question span').forEach(el => {
                el.textContent = '+';
            });
            
            // Abrir la clicked si estaba cerrada
            if (!isOpen) {
                answer.style.display = 'block';
                element.querySelector('span').textContent = '‚àí';
            }
        }

        // Cerrar todas las FAQs al cargar
        document.querySelectorAll('.faq-answer').forEach(el => {
            el.style.display = 'none';
        });
    </script>
</body>
</html>